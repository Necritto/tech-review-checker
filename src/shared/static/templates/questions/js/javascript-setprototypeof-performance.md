# ❓ Как изменение прототипа через `Object.setPrototypeOf()` влияет на производительность в JavaScript?

---

## Основное влияние

- `Object.setPrototypeOf(obj, proto)` изменяет внутреннее свойство `[[Prototype]]` объекта **динамически** во время выполнения.

- Современные JS-движки (V8, SpiderMonkey и др.) оптимизируют объекты, используя **стабильные структуры** (hidden classes / shapes).

- Динамическое изменение прототипа ломает эти оптимизации, заставляя движок перестраивать внутренние структуры и деоптимизировать доступ к свойствам.

---

## Последствия

- Ухудшение производительности операций чтения и записи свойств у объекта.

- Замедление вызова методов, т.к. движок не может эффективно кешировать цепочку прототипов.

- Увеличение времени работы и потребления памяти.

---

## Рекомендации

- Избегайте частого или динамического изменения прототипа объектов.

- По возможности создавайте объекты с нужным прототипом сразу через `Object.create()`.

- Используйте композицию или другие паттерны вместо наследования, если необходимо динамическое поведение.

---

## Итог

- Изменение прототипа через `Object.setPrototypeOf()` негативно влияет на производительность, т.к. нарушает оптимизации движка.

- Лучше планировать структуру прототипов заранее и не менять их в рантайме.

---
