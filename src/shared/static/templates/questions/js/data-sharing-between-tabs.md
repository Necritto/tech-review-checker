# ❓ Как обмениваться данными между вкладками браузера?

---

## Основные способы обмена данными между вкладками

### 1. localStorage + событие `storage`

- Все вкладки одного домена имеют доступ к одному `localStorage`.

- При изменении значения в `localStorage` в одной вкладке в остальных срабатывает событие `storage`.

- Позволяет реагировать на изменения данных и синхронизировать состояние.

---

#### Пример

```js
// Вкладка 1
localStorage.setItem('sharedData', JSON.stringify({ key: 'value' }));

// Вкладка 2
window.addEventListener('storage', (event) => {
  if (event.key === 'sharedData') {
    const data = JSON.parse(event.newValue);
    console.log('Данные обновлены:', data);
  }
});
```

---

### 2. BroadcastChannel API

- Позволяет создавать канал связи между вкладками одного происхождения (origin).

- Более удобен и эффективен для передачи сообщений.

---

#### Пример

```js
const channel = new BroadcastChannel('my_channel');

channel.postMessage({ text: 'Привет из другой вкладки!' });

channel.onmessage = (event) => {
  console.log('Получено сообщение:', event.data);
};
```

---

### 3. SharedWorker (редко используется)

- Позволяет нескольким вкладкам обмениваться данными через общего воркера.

- Требует поддержки браузером и больше сложностей в настройке.

---

## Ограничения и особенности

| Метод                  | Совместимость        | Особенности                      |
| ---------------------- | -------------------- | -------------------------------- |
| localStorage + storage | Широкая              | Только уведомления об изменениях |
| BroadcastChannel       | Современные браузеры | Быстрая и двунаправленная связь  |
| SharedWorker           | Ограниченная         | Сложнее в реализации             |

---

## Итог

- Для простых задач синхронизации предпочтительно использовать `localStorage` + событие `storage`.

- Для более гибкого обмена сообщениями рекомендуется `BroadcastChannel`.

- SharedWorker используется редко и требует дополнительной настройки.

---
