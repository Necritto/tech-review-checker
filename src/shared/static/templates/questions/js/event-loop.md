# ❓ Что такое цикл событий (Event Loop) и как он работает?

---

## Определение

Event Loop — это механизм в JavaScript-движках, который управляет выполнением кода, обработкой событий и асинхронных операций, обеспечивая неблокирующее поведение.

---

## Основные компоненты

- **Call Stack (Стек вызовов):**  
  Хранит функции, которые выполняются в текущий момент.

- **Task Queue (Очередь задач, макротаски):**  
  Содержит задачи, готовые к выполнению (например, события, setTimeout).

- **Microtask Queue (Очередь микротасков):**  
  Содержит задачи с более высоким приоритетом (промисы, `process.nextTick`).

---

## Механизм работы

1. Выполняется синхронный код, складывая функции в Call Stack.

2. Когда стек пустеет, event loop проверяет Microtask Queue и выполняет все микротаски.

3. После микротасков event loop берет одну задачу из Task Queue и помещает её в Call Stack для выполнения.

4. Процесс повторяется.

---

## Важные детали

- Микротаски выполняются **до** следующих макротасков, даже если в очереди макротасков накопилось много задач.

- Это обеспечивает быстрый отклик на промисы и другие микротаски.

---

## Пример

```js
console.log('Start');

setTimeout(() => console.log('Timeout'), 0);

Promise.resolve().then(() => console.log('Promise'));

console.log('End');
```

**Вывод:**

```text
Start  
End  
Promise  
Timeout
```

---

## Итог

- Event Loop — ядро асинхронного исполнения JS, позволяющее выполнять неблокирующий код.

- Управляет порядком выполнения синхронных функций, микротасков и макротасков.

- Понимание event loop критично для эффективной работы с асинхронным JS.

---
