### **Определение WebWorker**

WebWorker — API браузеров для выполнения JavaScript-кода в **фоновом потоке**, параллельно основному потоку выполнения (UI-потоку).

#### **Ключевые характеристики:**

- Работает в **отдельном потоке** (не блокирует интерфейс)
- Не имеет доступа к **DOM** и **глобальным переменным** основного потока
- Общается с основным потоком через **сообщения** (`postMessage`, `onmessage`)

---

### **Типы WebWorker'ов**

| Тип                 | Описание                                          | Пример использования            |
| ------------------- | ------------------------------------------------- | ------------------------------- |
| **DedicatedWorker** | Привязан к одному скрипту                         | Вычисления, обработка данных    |
| **SharedWorker**    | Доступен из разных вкладок/окон                   | Общий кеш, синхронизация данных |
| **ServiceWorker**   | Фоновый процесс для управления сетевыми запросами | PWA, оффлайн-режим              |

---

### **Пример использования DedicatedWorker**

#### **1. Основной поток**

```javascript
// Создание Worker
const worker = new Worker("worker.js");

// Отправка данных
worker.postMessage({ task: "CALCULATE", data: [1, 2, 3] });

// Получение результата
worker.onmessage = (event) => {
    console.log("Result:", event.data);
};
```

#### **2. Код Worker (worker.js)**

```javascript
// Обработка сообщений
self.onmessage = (event) => {
    if (event.data.task === "CALCULATE") {
        const result = event.data.data.reduce((a, b) => a + b, 0);
        self.postMessage(result);
    }
};
```

---

### **Ограничения WebWorker**

- **Нет доступа к:**
  - DOM
  - `window`, `document`
  - Некоторым API (например, `localStorage`)
- **Требуют отдельного файла** (нельзя создать из строки кода без `blob:`)
- **Ограниченная поддержка** в старых браузерах

---

### **Оптимизации**

- **Передача данных:** Используйте `Transferable Objects` для больших данных:

    ```javascript
    worker.postMessage(buffer, [buffer]); // Передача владения
    ```

- **Отмена задач:**

    ```javascript
    const worker = new Worker("worker.js");
    worker.terminate(); // Принудительная остановка
    ```

---

### **Сравнение с другими технологиями**

| Технология      | Потоки | Доступ к DOM | Использование                     |
| --------------- | ------ | ------------ | --------------------------------- |
| **WebWorker**   | Да     | Нет          | Фоновые вычисления                |
| **setTimeout**  | Нет    | Да           | Простые асинхронные задачи        |
| **WebAssembly** | Да     | Нет          | Высокопроизводительные вычисления |
