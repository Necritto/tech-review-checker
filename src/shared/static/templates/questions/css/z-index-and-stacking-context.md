# ❓ Что такое z-index и как формируется контекст наложения?

---

## Что такое z-index?

- `z-index` — CSS-свойство, определяющее порядок наложения (слоёв) элементов по оси Z (глубина).
- Чем больше значение `z-index`, тем выше элемент расположен "над" другими.
- Работает только для элементов с позиционированием, отличным от `static` (`relative`, `absolute`, `fixed`, `sticky`).

---

## Контекст наложения (Stacking Context)

- **Stacking context** — это локальный «слой», внутри которого элементы с `z-index` сравниваются только между собой.
- Элементы из разных stacking context не сравниваются напрямую по `z-index`.

---

## Что создает новый stacking context?

Новый контекст наложения создают:

- Элементы с позиционированием (`position`) и заданным `z-index`, отличным от `auto`.
- Элементы с `opacity` меньше 1.
- Элементы с `transform` отличным от `none`.
- Элементы с `filter` отличным от `none`.
- Элементы с `mix-blend-mode`, `isolation`, `will-change` и др.
- Элементы с CSS Grid, Flex и определенными свойствами (например, `contain`).

---

## Как формируется порядок наложения?

1. Браузер строит дерево stacking context.
2. Внутри одного контекста элементы с меньшим `z-index` лежат под элементами с большим.
3. Контексты располагаются согласно иерархии DOM и создают изолированные слои.

---

## Итог

- `z-index` управляет слоем элемента внутри своего контекста наложения.
- Новый stacking context ограничивает область видимости `z-index`.
- Правильное понимание контекстов наложения важно для контроля перекрытия элементов.

---
