# üß¨ –ß—Ç–æ —Ç–∞–∫–æ–µ Fiber –∏ –∫–∞–∫ –æ–Ω —Å–≤—è–∑–∞–Ω —Å Reconciliation

---

## üî∑ –ß—Ç–æ —Ç–∞–∫–æ–µ Fiber

**Fiber** ‚Äî —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –¥–≤–∏–∂–∫–∞ React –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –° –≤–µ—Ä—Å–∏–∏ 16 –æ–Ω–∞ –∑–∞–º–µ–Ω–∏–ª–∞ —Å—Ç–∞—Ä—ã–π —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç React:

- –†–∞–∑–±–∏–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ **—á–∞—Å—Ç–∏**
- –ü—Ä–µ—Ä—ã–≤–∞—Ç—å –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- –ü—Ä–∏–º–µ–Ω—è—Ç—å **–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã** –∫ –∑–∞–¥–∞—á–∞–º
- –†–∞–±–æ—Ç–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (–≤ —Ç.—á. —Å `Suspense`, `Concurrent Mode`)

–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ React —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω **Fiber-—É–∑–ª–æ–º** ‚Äî –æ–±—ä–µ–∫—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ, props, —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏ —Å–≤—è–∑—è—Ö –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏.

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Fiber-—É–∑–ª–∞

```ts
type FiberNode = {
  type: any;
  key: null | string;
  stateNode: any;
  return: FiberNode | null; // —Ä–æ–¥–∏—Ç–µ–ª—å
  child: FiberNode | null;
  sibling: FiberNode | null;
  pendingProps: any;
  memoizedProps: any;
  alternate: FiberNode | null; // –¥–≤–æ–π–Ω–∏–∫ (old vs new)
  flags: EffectFlags; // —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–æ–±–Ω–æ–≤–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å)
  ...
};
```

---

## üîÑ –°–≤—è–∑—å Fiber —Å Reconciliation

**Reconciliation** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ –¥–µ—Ä–µ–≤–∞ React-—ç–ª–µ–º–µ–Ω—Ç–æ–≤.

–í –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Fiber:

1. **–°–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ Fiber-—É–∑–ª–æ–≤**

   - –ù–æ–≤—ã–π —Ä–µ–Ω–¥–µ—Ä —Å–æ–∑–¥–∞–µ—Ç "—Ä–∞–±–æ—á–µ–µ" –¥–µ—Ä–µ–≤–æ (`workInProgress`)
   - –û–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å —Ç–µ–∫—É—â–∏–º (`current`)

2. **–í –∫–∞–∂–¥—ã–π —É–∑–µ–ª –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç—ã**

   - `Placement`, `Update`, `Deletion` –∏ —Ç.–¥.

3. **–ü–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–¥–∞** –Ω–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç React —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

- **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** (–ø–æ —á–∞—Å—Ç—è–º)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ > —Å–µ—Ç–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ > –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã**: –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à—ë–ª –Ω–æ–≤—ã–π —Ä–µ—Ä–µ–Ω–¥–µ—Ä –¥–æ –∫–æ–Ω—Ü–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ

---

## üïì Scheduling –∏ –ø—Ä–µ—Ä—ã–≤–∞–µ–º–æ—Å—Ç—å

React –º–æ–∂–µ—Ç **–ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å** —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –¥–µ—Ä–µ–≤–æ–º Fiber. –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **cooperative scheduling** –∏ –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `requestIdleCallback` (–∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π Scheduler).

–ù–∞–ø—Ä–∏–º–µ—Ä:

```tsx
startTransition(() => {
  setSearchQuery(q);
});
```

‚Äî `startTransition` –ø–æ–Ω–∏–∂–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, –∏ React –º–æ–∂–µ—Ç –æ—Ç–ª–æ–∂–∏—Ç—å –µ—ë.

---

## üîÅ Double buffering

Fiber –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **–¥–≤–æ–π–Ω–æ–π –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏**:

- `current` ‚Äî –∞–∫—Ç–∏–≤–Ω–æ–µ –¥–µ—Ä–µ–≤–æ
- `workInProgress` ‚Äî –Ω–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ

React —á–µ—Ä–µ–¥—É–µ—Ç –∏—Ö –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –¥–µ—Ä–µ–≤–æ, –ø–æ–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Å—Ç–∞—ë—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å

---

## ‚úÖ –í—ã–≤–æ–¥

- Fiber ‚Äî —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è React-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –≤–∏–¥–µ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤
- –ö–∞–∂–¥—ã–π —Ä–µ—Ä–µ–Ω–¥–µ—Ä —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ Fiber, –∏ reconciliation —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –µ–≥–æ —Å–æ —Å—Ç–∞—Ä—ã–º
- –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π React: `Suspense`, `Concurrent`, `Transitions`, `startTransition`, `useDeferredValue`, –∏ —Ç.–¥.

---
