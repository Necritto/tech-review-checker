# Можно ли использовать `startTransition` внутри обработчиков событий?

---

## Краткий ответ

Да, `startTransition` можно и рекомендуется использовать **внутри синхронных обработчиков событий** (например, `onClick`, `onChange`) для маркировки обновлений состояния как низкоприоритетных.

---

## Подробнее

- React Scheduler позволяет разделять высокоприоритетные обновления (например, пользовательский ввод) и низкоприоритетные (обновления UI, которые могут подождать).
- В обработчике события вызов `startTransition(() => { setState(...) })` сообщает React, что обновление не критично и может быть выполнено с более низким приоритетом.
- Это улучшает отзывчивость интерфейса и предотвращает «зависания» при дорогих рендерах.

---

## Ограничения

- **`startTransition` должен вызываться в рамках синхронного контекста обработки события.**
- Вызов `startTransition` в асинхронных функциях (например, после `await` или в промисах) **не гарантирует низкоприоритетное выполнение**, так как React может уже выйти из текущего контекста обновлений.
- В таких случаях `startTransition` может работать как обычный вызов `setState`.

---

## Рекомендации

```tsx
function handleInput(e) {
  const value = e.target.value;
  
  startTransition(() => {
    setSearchQuery(value);
  });
}
```

- Используйте `startTransition` в синхронных обработчиках событий для оптимизации UI.
- Избегайте вызова `startTransition` в асинхронных колбэках вне обработчиков событий.

---

## Итог

- Да, `startTransition` можно использовать в обработчиках событий — это рекомендованный паттерн для улучшения производительности.
- Однако важно вызывать его в синхронном контексте, иначе эффекта от пониженного приоритета обновления может не быть.

---
